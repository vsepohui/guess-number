<!doctype html>
<html lang="ru" class="h-100">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="Ivan Trunaev"/>
    <title>Гадание по числу</title>
    <script src="js/color-modes.js"></script>
    <link href="bootstrap.min.css" rel="stylesheet" />
    <meta name="theme-color" content="#712cf9" />
    <link href="cover.css" rel="stylesheet" />
	<script src="js/jquery-3.7.1.min.js"></script>
	<script src="js/bootstrap.bundle.min.js"></script>
	
	

  </head>
  <body class="d-flex h-100 text-center text-bg-dark">
 
    <script>
	    $(function() {
			$('#guess').click(function() {
				val = $('#number').val();
				val = val % 13;
				alert(val);
				$.ajax('book.html').done(function(book) {				
					$('#result').html(book);
					const re = new RegExp("\\[ Гексаграмма "+(val));
					var d = '';
					 	var p = $('#result span').filter(function(){ 
							return re.test($(this).text());
						}).parent();
						d += p.html();
						//	alert(d);
					 	while(1) {
							
							p = p.next();
							//alert(p.html());
							if(!p) {
								//alert('hoo');
								break;
							}
							const re2 = new RegExp("\\[ Гексаграмма "+(val + 1));
							if( p.filter(function() { return re2.test($(this).text()) }).text()) {
								//alert('foo');
								break;
							}
							d += p.html()+'<br/>';
						}
						
						$('#result').html(d);
				});
			});
		});
    </script>
 
 
    <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
      <header class="mb-auto">
        <div>
          <h3 class="float-md-start mb-0">Гадание по числу</h3>
          <nav class="nav nav-masthead justify-content-center float-md-end">
        </div>
      </header>
      <main class="px-3">
        <h1>Введи число</h1>
        <p class="lead">
          Это может быть год рожения, номер паспорта, номер телефона, номер на бакноте, номер на чеке.
        </p>
        <p class="lead">
		  <div class="row">
			  <div class="col-9">
			<input type="text" class="form-control form-control-lg" id="number"/>
			</div>
			<div class="col-3">
			<button id="guess" class="btn btn-lg btn-light fw-bold border-white bg-white">Разгадать</button>
			</div>
			<div>


				<p id="result"></p>
		</div>
          </div>
        </p>
      </main>
      <footer class="mt-auto text-white-50">
        <p>
          Автор идеи <a href="https://trunaev.ru/" class="text-white">Ivan Trunaev</a>.
        </p>
      </footer>
    </div>
   

  </body>
</html>
